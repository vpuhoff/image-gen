data = {'data': [{'id': '808466570595781860', 'url': 'https://www.pinterest.com/pin/808466570595781860/', 'link': 'https://www.pinterest.com/r/pin/808466570595781860/5084739164692335824/ba94d993df16c851616e00106ceb6f605815d2aad14fe128a1cd85df6b4575f5', 'note': ' '}, {'id': '808466570595781847', 'url': 'https://www.pinterest.com/pin/808466570595781847/', 'link': 'https://www.pinterest.com/r/pin/808466570595781847/5084739164692335824/2329cc8d648bef7e8867973348892408f58d8934b8a6c7e1c8ac16b4d89bcf27', 'note': ' '}, {'id': '808466570595781843', 'url': 'https://www.pinterest.com/pin/808466570595781843/', 'link': 'https://www.pinterest.com/r/pin/808466570595781843/5084739164692335824/4b49fd9638a7841f763bb2afc54a0409c6176f883f5eba7c465ba151c1afc9ab', 'note': ' '}, {'id': '808466570595781714', 'url': 'https://www.pinterest.com/pin/808466570595781714/', 'link': 'https://www.pinterest.com/r/pin/808466570595781714/5084739164692335824/f72e57d570e45b8974c77e28b3c740b9911b1a69efb1340e560510b7f02e02ab', 'note': ' '}, {'id': '808466570595781651', 'url': 'https://www.pinterest.com/pin/808466570595781651/', 'link': 'https://www.pinterest.com/r/pin/808466570595781651/5084739164692335824/74e6b3961bcb3a57dc714993368267751a4e2b3cd3d2013d8c8bbb1e0475fd2b', 'note': ' '}, {'id': '808466570595781570', 'url': 'https://www.pinterest.com/pin/808466570595781570/', 'link': 'https://www.pinterest.com/r/pin/808466570595781570/5084739164692335824/3b4d075b037e3cbe2b21c48db68e8defd57181214742ad911d446594d14d8cbe', 'note': ' '}, {'id': '808466570595781384', 'url': 'https://www.pinterest.com/pin/808466570595781384/', 'link': 'https://www.pinterest.com/r/pin/808466570595781384/5084739164692335824/ad870720c05130b930f9c3c27cbe959d0f98d97ac331e631ac1f92b955d3521e', 'note': ' '}, {'id': '808466570595781378', 'url': 'https://www.pinterest.com/pin/808466570595781378/', 'link': 'https://www.pinterest.com/r/pin/808466570595781378/5084739164692335824/535cf6bc6b91c1d76c9f134c3bb5215d8a445d27a32919a3a9b5db048f3e6d27', 'note': ' '}, {'id': '808466570595781361', 'url': 'https://www.pinterest.com/pin/808466570595781361/', 'link': '', 'note': ' '}, {'id': '808466570595781356', 'url': 'https://www.pinterest.com/pin/808466570595781356/', 'link': 'https://www.pinterest.com/r/pin/808466570595781356/5084739164692335824/4533ff6d063100a0638794d9992060f2b2b069a4d0f39aaba030910f3b68e17f', 'note': ' '}, {'id': '808466570595781342', 'url': 'https://www.pinterest.com/pin/808466570595781342/', 'link': 'https://www.pinterest.com/r/pin/808466570595781342/5084739164692335824/e45e7e021dbf7ba84a7dc42720b370ec59ab68329b5eddec9163ecfed163d45c', 'note': ' '}, {'id': '808466570595781336', 'url': 'https://www.pinterest.com/pin/808466570595781336/', 'link': 'https://www.pinterest.com/r/pin/808466570595781336/5084739164692335824/31d0b0dce563535820431cff106d0d9ced670c549c4ec5eef868e5e218ed6df8', 'note': ' '}, {'id': '808466570595781332',
'url': 'https://www.pinterest.com/pin/808466570595781332/', 'link': 'https://www.pinterest.com/r/pin/808466570595781332/5084739164692335824/e76ba6d44bf2432967aa07a325234622131b1c1da8eade3049023519cfdc410e', 'note': ' '}, {'id': '808466570595781328', 'url': 'https://www.pinterest.com/pin/808466570595781328/', 'link': 'https://www.pinterest.com/r/pin/808466570595781328/5084739164692335824/872bc8dbe44e0b9a1efe3d94c9a939d7b7b2292d179b66b5c612b488df3755cd', 'note': ' '}, {'id': '808466570595781324', 'url': 'https://www.pinterest.com/pin/808466570595781324/', 'link': 'https://www.pinterest.com/r/pin/808466570595781324/5084739164692335824/d5ca41f9b7c2509345d8e2a4bbe504ab945392fbd5fc2476cf8284bf76eb9ce8', 'note': ' '}, {'id': '808466570595781305', 'url': 'https://www.pinterest.com/pin/808466570595781305/', 'link': 'https://www.pinterest.com/r/pin/808466570595781305/5084739164692335824/dd5045d38fb12e8168ac473cc84c95b9b7236ddd650acf06249d65565c64e19c', 'note': ' '}, {'id': '808466570595781302', 'url': 'https://www.pinterest.com/pin/808466570595781302/', 'link': 'https://www.pinterest.com/r/pin/808466570595781302/5084739164692335824/4830bad6aa8bc09b9db9a60d48f40032f3ab77da9aa73c0192f1f15b55d54e3c', 'note': ' '}, {'id': '808466570595781301', 'url': 'https://www.pinterest.com/pin/808466570595781301/', 'link': 'https://www.pinterest.com/r/pin/808466570595781301/5084739164692335824/2083fdd9c0aa04116863a53646a61bea7ecc46a1aafbaa8bcb829a08dbfbe2ad', 'note': ' '}, {'id': '808466570595781300', 'url': 'https://www.pinterest.com/pin/808466570595781300/', 'link': 'https://www.pinterest.com/r/pin/808466570595781300/5084739164692335824/1b717cf8946db902ea2bb1ce707ab3f5a77fbb5ffc2b79952fa80329d8cfa400', 'note': ' '}, {'id': '808466570595781298', 'url': 'https://www.pinterest.com/pin/808466570595781298/', 'link': 'https://www.pinterest.com/r/pin/808466570595781298/5084739164692335824/a88519fc7df82b5195e613b5358784120563068914663d0d58fc0dd8e265e4e2', 'note': ' '}, {'id': '808466570595781294', 'url': 'https://www.pinterest.com/pin/808466570595781294/', 'link': 'https://www.pinterest.com/r/pin/808466570595781294/5084739164692335824/c121548b1a1cf51c60a0ddd176506ad63ae785ba5deb15b7f45f6b2396bcb2e5', 'note': ' '}, {'id': '808466570595781290', 'url': 'https://www.pinterest.com/pin/808466570595781290/', 'link': 'https://www.pinterest.com/r/pin/808466570595781290/5084739164692335824/f75522b247ccd4862baec31b49973ce3f03c20ec1dd05255cbbad230b26af67e', 'note': ' '}, {'id': '808466570595781282', 'url': 'https://www.pinterest.com/pin/808466570595781282/', 'link': 'https://www.pinterest.com/r/pin/808466570595781282/5084739164692335824/737bb7e49f77f4a0427f25e3eccfc4bfb7e7667b94dd8124ead22bf979a7a521', 'note': ' '}, {'id': '808466570595781273', 'url': 'https://www.pinterest.com/pin/808466570595781273/', 'link': 'https://www.pinterest.com/r/pin/808466570595781273/5084739164692335824/66d79b2e0133971e322286458a048791075012899f547420f487dd692f4ab2f1', 'note': ' '}, {'id': '808466570595781265', 'url': 'https://www.pinterest.com/pin/808466570595781265/', 'link': 'https://www.pinterest.com/r/pin/808466570595781265/5084739164692335824/8f824ad862e385b4e56f9b2933b8ae8ad3283f8e098926c93eab9e4ef8320d75', 'note': ' '}], 'page': {'cursor': 'LT44MDg0NjY1NzA1OTU3ODEyNjV8MjV8YWNkMWFiMWEwMGI4ZTg0M2M4MmIzYWQ4Y2RjNTliYjA4NDk4ZGMxZmE4MmRmN2JmMDBiYTEyM2IyY2Y4NDNlYnxORVd8', 'next': 'https://api.pinterest.com/v1/boards/vpuhoff92/hard-metal-machine/pins/?access_token=Arp3JS3p3frmRIM138uwoigN38XNFfZuPCg_Ko5GkJ9UhwDM0As4QDAAARM9RpCovdrA0ngAAAAA&fields=id%2Curl%2Clink%2Cnote&cursor=LT44MDg0NjY1NzA1OTU3ODEyNjV8MjV8YWNkMWFiMWEwMGI4ZTg0M2M4MmIzYWQ4Y2RjNTliYjA4NDk4ZGMxZmE4MmRmN2JmMDBiYTEyM2IyY2Y4NDNlYnxORVd8'}, 'ratelimit': {'remaining': 2, 'limit': 5}}

import requests
img_pattern=r"https://i.pinimg.com/originals/[a-z0-9/.]+"
import re

def getImg(html):
    return re.findall( img_pattern, html)

def getHash(url):
    return url.replace('https://i.pinimg.com/originals/','').replace('/','-')

import diskcache as dc
cache = dc.Cache('localdb')

from requests import get  
def download(url, file_name):
    with open(file_name, "wb") as file:
        response = get(url)
        file.write(response.content)
        
from tqdm import tqdm
images=[]
for pin in tqdm(data['data']):
    id = pin['id']
    url = f"https://www.pinterest.com/pin/{id}/"
    html = requests.get(url).text
    pinkey=f"pin-{id}"
    if not pinkey in cache:
        for x in tqdm(getImg(html)):
            images.append(x)
            imgkey=f"img-{getHash(x)}"
            if not imgkey in cache:
                target = f"./images/{imgkey}"
                download(x,target)
                cache[imgkey]='OK'
        cache[pinkey]='OK'
